---
id: 1
title: "create-rag-chatbot-constitution"
stage: "constitution"
date_iso: "2025-12-16"
surface: "agent"
model: "claude-sonnet-4-5-20250929"
feature: "rag-chatbot"
branch: "1-physical-ai-textbook"
user: "user"
command: "/sp.constitution"
labels: ["constitution", "specification", "rag-chatbot", "backend"]
links:
  spec: null
  ticket: null
  adr: null
  pr: null
files_yaml: |
  - backend/constitution.md
tests_yaml: |
  - None
---

# Constitution Creation: Integrated RAG Chatbot Development for Docusaurus-Published Book

## Original Prompt
```
/sp.constitution Project: Integrated RAG Chatbot Development for Docusaurus-Published Book Core principles:
•    Specification-first development: All components (ingestion pipeline, vector store, backend API, frontend embedding, selected text handling) must be defined in specifications before implementation
•    Accuracy and context faithfulness: Responses must be grounded in the book's content with no hallucinations; selected text queries restricted to user-highlighted excerpts only
•    Reproducibility: Full documentation of data ingestion, embedding process, and query handling so the chatbot can be rebuilt from the published book
•    Security and privacy: Sensitive API keys and credentials never hardcoded or exposed in client-side code
•    Zero additional cost: Exclusively use free tiers of services (Cohere Free Tier, Qdrant Cloud Free Tier, Neon Serverless Postgres) and open-source tools
•    Accessibility: Chatbot fully integrated into the Docusaurus site, responsive, and usable without disrupting reading flow
Key standards:
•    RAG pipeline: Use Cohere models (via provided Cohere API key) for both embeddings and generation; support hybrid search if beneficial (dense + sparse vectors in Qdrant)
•    Backend: FastAPI with Cohere SDK integration for chat completions and embeddings; custom agentic logic if needed for context handling
•    Vector store: Qdrant Cloud Free Tier (1GB limit) for storing book content embeddings generated by Cohere
•    Metadata storage: Neon Serverless Postgres for session management, user-selected text handling, or conversation history if needed
•    Frontend embedding: Custom React component or lightweight chat UI library integrated into Docusaurus (v3 latest) for seamless chat widget
•    Selected text feature: Implement client-side capture of highlighted text, passed as context-restricted query to backend
•    All code: Type-safe (Python/FastAPI backend with Cohere SDK, TypeScript/React frontend), with comprehensive tests and logging
Constraints:
•    Services limited to: Cohere (free tier via provided API key), FastAPI, Qdrant Cloud Free Tier, Neon Serverless Postgres, Docusaurus (latest stable), GitHub-hosted repository
•    No paid tiers or additional cloud costs; stay within free limits (e.g., Cohere rate limits, Qdrant ~1M vectors, Neon compute/storage bounds)
•    Book content ingestion: Chunked Markdown/MDX from the published Docusaurus book (20,000–40,000 words) using Cohere embeddings
•    Authentication: Simple API key protection for backend endpoints
•    Deployment: Backend as serverless or low-cost host if needed; frontend fully static within Docusaurus on GitHub Pages
Success criteria:
•    Live embedded chatbot in the deployed Docusaurus book answers general questions accurately based on full book retrieval using Cohere RAG
•    Selected text queries responded to using only the user-highlighted excerpt as context
•    No hallucinations or off-topic responses in testing
•    Full end-to-end reproducibility: Instructions allow anyone to ingest updated book content with Cohere embeddings
```

## Response Summary
Created a new constitution file for the Integrated RAG Chatbot Development project in the backend folder. The constitution includes all specified core principles, key standards, constraints, and success criteria for the RAG chatbot project that integrates with the Docusaurus-published textbook.

## Outcome
The constitution file at `backend/constitution.md` has been successfully created with the new project requirements, maintaining the proper structure and governance information.